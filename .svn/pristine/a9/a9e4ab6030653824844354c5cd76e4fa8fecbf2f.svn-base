<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>站点管理</title>
    <link href="~/Scripts/JqEasyUI/themes/default/easyui.css" rel="stylesheet" />
    <link href="~/Style/Site.css" rel="stylesheet" />
    <link href="~/Style/common.css" rel="stylesheet" />
    <link href="~/Scripts/JqEasyUI/themes/icon.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.7.1.min.js"></script>
    <script src="~/Scripts/Common/GlobalLoading.js"></script>
    <script src="~/Scripts/JqEasyUI/jquery.easyui.min.js"></script>
    <script src="~/Scripts/JqEasyUI/easyloader.js"></script>
    <script src="~/Scripts/Common/Common.js"></script>
    <script src="~/Scripts/ClientMng/ClientInfoMng.js"></script>
    <script src="~/Scripts/SiteMng/SiteMng.js"></script>
    <script src="~/Scripts/FieldMng/FiledMng.js"></script>
    <script src="~/Scripts/Common/ui-com-table.js" type="text/javascript"></script>
    <script src="~/Scripts/UserMng/UserDtu.js"></script>
    <script src="~/Scripts/ajaxfileupload1.0/ajaxfileupload.js"></script>
    <script type="text/javascript">
        $(function () {
            UserDTU.LoadCompanys();//加载公司
        });
        var objFieldPowerQ = {
            objTab: null,
            fnBind: function () {
                $("#filedComList").css("height", $("#divRight").css("height"));
                $("#tbDiv").css("height", $(window).height() * 0.87);
                $("#btnQuery").click(function () {
                    FiledMng.GetFiledList();
                    objFieldPowerQ.objTab.fnResizeTable();
                });
            },
            fnLoad: function () {
                objFieldPowerQ.fnBind();
                Common.GetProvince();
                objFieldPowerQ.objTab = new comTab();
                objFieldPowerQ.objTab.fnInit();
            }
        };
        window.onload = objFieldPowerQ.fnLoad;
        function ajaxFileUpload() {
            
            $("#loading").ajaxStart(function () {
                $(this).show();
            })//开始上传文件时显示一个图片  
            .ajaxComplete(function () {
                $(this).hide();
            });//文件上传完成将图片隐藏起来  

            $.ajaxFileUpload({
                url: 'UpLoadFile',//用于文件上传的服务器端请求地址  
                secureuri: false,//一般设置为false  
                fileElementId: 'file',//文件上传控件的id属性  
                dataType: 'json',//返回值类型 一般设置为json  
                success: function (data, status) //服务器成功响应处理函数  
                {
                    alert(data.message);//从服务器返回的json中取出message中的数据,其中message为在struts2中定义的成员变量  
                    if (typeof (data.error) != 'undefined') {
                        if (data.error != '') {
                            alert(data.error);
                        } else {
                            alert(data.message);
                        }
                    }
                },
                error: function (data, status, e)//服务器响应失败处理函数  
                {
                    alert(e);
                }
            })
            return false;
        }
    </script>
</head>
 <body onload="$('#loading').hide()">
    <div class=" com_TextCenter com_font13Px com_DivBorderGray">
        所属公司:<select class="com_w15pen" id="ddlCompany" onchange="UserDTU.GetGroupsByComId(this.value)">
        </select>
        所属分组:<select class="com_w15pen" id="ddlGroup">
        </select>

        <input type="button" value="查询" class="buttonVer2" id="btnQuery" />
        <br />
        <input type="file" id="file" name="file" />
        <input type="button" value="上传" onclick="return ajaxFileUpload();">
        <a href="#">模板下载</a>
    </div>
    <div id="tbDiv" class="com_fl   com_font13Px" style="overflow-y: auto; overflow-x: hidden">
        <table id="ComList" class="ui-com-tab" rules="all">
            <thead>
                <tr align="left" class="panel-header">
                    <th class=' com_TextCenter com_w10pen'>站点编号
                    </th>
                    <th class="com_TextCenter com_w25pen">站点名称
                    </th>
                    <th class='com_TextCenter com_w12pen'>调压站品牌
                    </th>
                    <th class='com_TextCenter com_w12pen'>调压站供应商
                    </th>
                    <th class='com_TextCenter'>流量计品牌
                    </th>
                    <th class='com_TextCenter'>流量计型号
                    </th>
                    <th class='com_TextCenter com_w15pen'>操作
                    </th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
  <div id="loading" style="position: absolute; height: 100%; width: 100%; filter: alpha(opacity = 40); -moz-opacity: 0.4; opacity: 0.4; background: gray url(/Images/loading.gif) center center no-repeat; z-index: 100000; top: 0px; left: 0px"></div>
</body>
</html>
