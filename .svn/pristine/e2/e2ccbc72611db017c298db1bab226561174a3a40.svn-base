using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Com.Winfotian.Proxy;
using WinfoToolSys.Pms;
using Proxy;
using Proxy.ServiceWinToolWrite;

namespace WinfoToolSys.Controllers.SiteMng
{
    public class SiteSetController : Controller
    {
        //站点配置
        // GET: /SiteSet/
        public ActionResult Index()
        {
            return View();
        }

        //根据配置名称查询
        public JsonResult GetSiteSetList(string configName)
        {
            return Json(ServcieTool.WinToolServiceReadInstance.GetDTUConfigListByConfigName("", configName));
        }

        public string UpdateSiteSet(T_DTU_Config config)
        {
            string rlst = string.Empty;
            if (ServcieTool.WinToolServiceWriteInstance.UpdateDtuConfig(Pms.PmsMng.ActiveKey, config, PmsMng.LogUser))
            {
                rlst = "true";
            }
            else
            {
                rlst = "false";
            }
            return rlst;
        }

        public ActionResult SiteSetAdd()
        { return View(); }

       

        public string DeleteConfig(string ConfigCode)
        {
            return "";
        }

        public ActionResult SiteSetDetail(string Oper, string ConfigCode, string CType)
        {
            //ViewBag.SiteSetObj = new ServiceProxyRead().GetProxy().GetDtuConfigById(PmsMng.ActiveKey, ConfigCode, CType);
            string OperText = "";
            switch (Oper)
            {
                case "Show":
                    OperText = "<input type=button  class='buttonVer2' value='添加'>";
                    break;
                case "Edit":
                    OperText = "<input type=button class='buttonVer2' value='修改' onclick='SiteSet.UpdateConfig()'>";
                    break;
                default: break;
            }
            ViewBag.Oper = OperText;
            return View();
        }
    }
}
